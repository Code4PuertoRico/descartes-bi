{% extends "base.html" %}
{% load i18n %}
{% load static %}

{% block base_javascript %}
    <script type="text/javascript">
         $(document).ready(function() {
            {% for element in dashboard.active_elements %}
                {% if element.report %}
                    $("#chart{{ element.pk }}").load("{{ element.load_url }}");
                {% else %}
                    $("#chart{{ element.pk }}").html('<iframe src="{{ element.load_url }}" style="height: 450px; width: 100%;"></iframe>');
                {% endif %}
            {% endfor %}
         });
    </script>
{% endblock base_javascript %}

{% block base_content %}
    <div id="dashboard">
        {% for row in rows %}
        <div class="row-fluid">

            {% for element in row %}

                    <div class="span{{ element.span }}">

                        <div class="widget">
                            <div class="widget-header">
                                <i class="icon-bookmark"></i>
                                <h3>{{ element }}</h3>
                            </div>
                            <div class="widget-content">

                                <div id="chart{{ element.pk }}">

                                    <div class="row-fluid">
                                        <div class="span12 pagination-centered">
                                            <img src="{% static 'images/spinner.gif' %}" alt="{% trans 'loading' %}" width="40" height="40"/>
                                        </div>
                                    </div>

                                </div>
                            </div>
                        </div>
                    </div>
            {% endfor %}

        </div>
        {% endfor %}
    </div>
{% endblock base_content %}
